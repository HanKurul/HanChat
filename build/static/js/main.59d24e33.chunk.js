(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,a,t){},48:function(e,a,t){e.exports=t(92)},53:function(e,a,t){},83:function(e,a){},91:function(e,a,t){},92:function(e,a,t){"use strict";t.r(a);var n,r,c,l,s=t(0),o=t.n(s),i=t(45),m=t.n(i),u=t(10),d=t(1),E=t(3),f=(t(53),t(46)),g=t.n(f),N=function(){return n||(console.log("Socket Inited"),n=g()("https://dark-chat-22.herokuapp.com/")),n},p=function(){return r},v=function(e){r=e},b=function(){return c},h=function(e){c=e},j=function(){var e=Object(s.useState)(""),a=Object(E.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(""),c=Object(E.a)(r,2),l=c[0],i=c[1],m=Object(s.useState)(!1),f=Object(E.a)(m,2),g=f[0],p=f[1],b=function(e){e.preventDefault(),t&&l?N().emit("LoginMsg",{UserName:t,Password:l},(function(e){var a=e.error,n=e.success,r=e.ProfilePic;a&&alert(a),n&&(r&&h(r),v(t),alert(n),p(!0))})):alert("Username And Password Required")};return o.a.createElement("div",{className:"join-main"},o.a.createElement("div",{className:"join-OuterContainer"},o.a.createElement("div",{className:"join-InnerContainer"},o.a.createElement("h1",{className:"join-heading"},"Join"),o.a.createElement("div",null,o.a.createElement("input",{placeholder:"Name",className:"join-Input",type:"text",onChange:function(e){return n(e.target.value)}}),o.a.createElement("input",{placeholder:"Password",className:"join-Input",type:"password",onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&b(e)}})),o.a.createElement("button",{className:"join-loginbutton mt-20",type:"submit",onClick:function(e){return b(e)}},"Sign In"),o.a.createElement(u.b,{to:"/register"},o.a.createElement("button",{className:"join-regbutton mt-20",type:"submit"},"Register")),!0===g&&o.a.createElement(d.a,{to:"/chat"}))))},R=t(16),O=(t(90),function(e){var a=e.RoomsBar,t=e.EnterRoom,n=e.CurrentRoom;return a?0===a.length?o.a.createElement("div",null):o.a.createElement("div",{className:"rooms"},o.a.createElement("ul",null,a.map((function(e,a){return o.a.createElement("li",{key:e._id,onClick:function(a){return function(e,a){e._id!==a._id&&(console.log("Entering "+a.RoomName),t(e.RoomName,a))}(n,e)},className:n._id===e._id?"activeroom":""},o.a.createElement("div",{className:"itemcontainer"},o.a.createElement("div",{className:"imagecontainer"},o.a.createElement("img",{src:e.icon})),o.a.createElement("div",{className:"bannercontainer"},o.a.createElement("div",{className:"name"},e.RoomName),o.a.createElement("div",{className:"preview"},e.LastSender,":",e.LastMessage))))})))):o.a.createElement("div",null)}),S=(t(44),function(e){var a=e.messages;return a?0===a.length?o.a.createElement("div",null):o.a.createElement("ul",null,a.map((function(e,a){return o.a.createElement("li",{key:a,className:"".concat(e.Sender===p()?"mine":"")},o.a.createElement("div",{className:"itemcontainer"},o.a.createElement("div",{className:"imagecontainer"},o.a.createElement("img",{src:"http://emilcarlsson.se/assets/harveyspecter.png"})),o.a.createElement("div",{className:"mgscointainer"},o.a.createElement("div",{className:"info"}," ",e.Sender," at ",new Date(e.createdAt).getHours(),":",new Date(e.createdAt).getMinutes()," "),o.a.createElement("div",{className:"msg"},e.Message))))}))):o.a.createElement("div",null)}),y=function(){var e=Object(s.useState)(""),a=Object(E.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)({}),c=Object(E.a)(r,2),l=c[0],i=c[1],m=Object(s.useState)([]),u=Object(E.a)(m,2),f=u[0],g=u[1],v=Object(s.useState)([]),h=Object(E.a)(v,2),j=h[0],y=h[1],w=Object(s.useRef)();Object(s.useEffect)((function(){N().emit("RoomBasicInfos",(function(e){var a=e.data;e.error;a&&(y(a),a[0]._id&&C("",a[0]))})),N().on("roomlastmessage",(function(e){y((function(a){var t=Object(R.a)(a),n=t.findIndex((function(a){return a._id===e._id}));return-1!==n&&(t[n].LastMessage=e.LastMessage,t[n].LastSender=e.LastSender),t}))})),N().on("newmessage",(function(e){g((function(a){return[].concat(Object(R.a)(a),[e])}))})),console.log("Successfully Inited")}),[]),Object(s.useEffect)((function(){w.current&&(w.current.scrollTop=Number.MAX_SAFE_INTEGER)}),[f]);var C=function(e,a){N().emit("EnterRoom",{RoomName:a.RoomName,OldRoomName:e,RoomId:a._id,UserName:p()},(function(t){var n=t.error,r=t.data;n?console.error(r):r&&(i(a),g(r),console.warn("Left: "+e+" And Succesfully Joined: "+a.RoomName))}))},I=function(e){if(e.preventDefault(),t){var a={RoomId:l._id,RoomName:l.RoomName,Msg:{Sender:p(),Message:t,createdAt:new Date}};g((function(e){return[].concat(Object(R.a)(e),[a.Msg])})),N().emit("SendMessageToRoom",a,(function(e){var a=e.error,t=e.data;a?console.error(t):t&&(n(""),console.warn(t))}))}};return p()?o.a.createElement("div",null,o.a.createElement("div",{className:"frame-container"},o.a.createElement("div",{className:"frame"},o.a.createElement("div",{className:"sidepanel"},o.a.createElement("div",{className:"top"},o.a.createElement("div",{className:"imagecontainer"},o.a.createElement("img",{src:b()})),o.a.createElement("div",{className:"bannercontainer"},o.a.createElement("button",null,o.a.createElement("i",{className:"fa fa-id-card","aria-hidden":"true"}),o.a.createElement("span",null,p())))),o.a.createElement(O,{RoomsBar:j,CurrentRoom:l,EnterRoom:C}),o.a.createElement("div",{className:"buttons"},o.a.createElement("div",{className:"buttonscontainer"},o.a.createElement("button",null,o.a.createElement("i",{className:"fa fa-user-plus fa-fw","aria-hidden":"true"}),o.a.createElement("span",null,"Create Room"))),o.a.createElement("div",{className:"buttonscontainer"},o.a.createElement("button",null,o.a.createElement("i",{className:"fa fa-cog fa-fw","aria-hidden":"true"}),o.a.createElement("span",null,"Settings"))))),o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"roominfo"},o.a.createElement("img",{src:l.icon}),o.a.createElement("p",null,l.RoomName)),o.a.createElement("div",{ref:w,className:"messages"},o.a.createElement(S,{messages:f})),o.a.createElement("div",{className:"message-input"},o.a.createElement("div",{className:"inputfield"},o.a.createElement("input",{type:"text",placeholder:"Write your message...",value:t,onChange:function(e){var a=e.target.value;return n(a)},onKeyPress:function(e){return"Enter"===e.key?I(e):null}})),o.a.createElement("div",{className:"sendbutton"},o.a.createElement("button",{onClick:function(e){return I(e)}},o.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}),o.a.createElement("span",null)))))))):o.a.createElement(d.a,{to:"/"})},w=(t(91),function(){var e=Object(s.useState)(""),a=Object(E.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(""),c=Object(E.a)(r,2),i=c[0],m=c[1],u=Object(s.useState)(""),f=Object(E.a)(u,2),g=f[0],p=f[1],b=o.a.useState(!1),j=Object(E.a)(b,2),R=j[0],O=j[1],S=function(e){e.preventDefault(),t&&i&&g?N().emit("RegisterMsg",{UserName:t,Password:i,PPb64:g},(function(e){var a=e.error,n=e.success;a&&alert(a),n&&(alert(n),v(t),""!==g&&h(g),O(!0))})):alert("Username,Password,ProfilePic Required")},y=function(e){p(l.result)};return o.a.createElement("div",{className:"reg-main"},o.a.createElement("div",{className:"reg-OuterContainer"},o.a.createElement("div",{className:"reg-InnerContainer"},o.a.createElement("h1",{className:"reg-heading"},"Register"),o.a.createElement("div",null,""!==g?o.a.createElement("div",{className:"Neon Neon-theme-dragdropbox"},o.a.createElement("img",{className:"reg-selected-image",src:g,alt:"Red dot"})):o.a.createElement("div",{className:"Neon Neon-theme-dragdropbox"},o.a.createElement("input",{className:"reg-myinput",name:"files[]",id:"filer_input2",type:"file",accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){var a;((a=e.target.files[0]).size/1024/1024).toFixed(4)>3?alert("File Is To Big (3 MB) MAX"):((l=new FileReader).onloadend=y,l.readAsDataURL(a))}}),o.a.createElement("div",{className:"Neon-input-dragDrop"},o.a.createElement("div",{className:"Neon-input-inner"},o.a.createElement("div",{className:"Neon-input-icon"},o.a.createElement("i",{className:"fa fa-file-image-o"})),o.a.createElement("div",{className:"Neon-input-text"},o.a.createElement("h3",null,"Upload Your Profile Picture"),o.a.createElement("span",{className:"spanstyle"},"Drag & Drop")),o.a.createElement("a",{className:"Neon-input-choose-btn blue"},"Browse Files")))),o.a.createElement("input",{placeholder:"Name",maxLength:"18",className:"reg-Input",type:"text",onChange:function(e){return n(e.target.value)}}),o.a.createElement("input",{placeholder:"Password",maxLength:"20",className:"reg-Input",type:"password",onChange:function(e){return m(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&S(e)}})),o.a.createElement("button",{className:"reg-regbutton mt-20",type:"submit",onClick:function(e){return S(e)}},"Register"),!0===R&&o.a.createElement(d.a,{to:"/chat"}))))}),C=function(){return o.a.createElement(u.a,null,o.a.createElement(d.b,{path:"/",exact:!0,component:j}),o.a.createElement(d.b,{path:"/chat",component:y}),o.a.createElement(d.b,{path:"/register",component:w}))};m.a.render(o.a.createElement(C,null),document.querySelector("#root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.59d24e33.chunk.js.map